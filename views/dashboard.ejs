<section class="dashboard-page">
    <div class="container">
        <h1 class="text-center my-4">ููุญุฉ ุงูุชุญูู</h1>
        <p class="text-center mb-5">ุชุญููู ูุนุฑุถ ูุชุงุฆุฌ ุงุณุชุจูุงู ุชูููู ุงูุงุญุชูุงุฌุงุช ุงูุชุฏุฑูุจูุฉ</p>
        
        <div class="dashboard-container">
            <ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="summary-tab" data-bs-toggle="tab" data-bs-target="#summary" type="button" role="tab" aria-controls="summary" aria-selected="true">ููุฎุต ุงููุชุงุฆุฌ</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="psychological-tab" data-bs-toggle="tab" data-bs-target="#psychological" type="button" role="tab" aria-controls="psychological" aria-selected="false">ุงููุฌุงู ุงูููุณู ูุงูุงุฌุชูุงุนู</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="educational-tab" data-bs-toggle="tab" data-bs-target="#educational" type="button" role="tab" aria-controls="educational" aria-selected="false">ุงููุฌุงู ุงูุชุฑุจูู ูุงูุชุนูููู</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="medical-tab" data-bs-toggle="tab" data-bs-target="#medical" type="button" role="tab" aria-controls="medical" aria-selected="false">ุงููุฌุงู ุงูุตุญู ูุงูุทุจู</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="religious-tab" data-bs-toggle="tab" data-bs-target="#religious" type="button" role="tab" aria-controls="religious" aria-selected="false">ุงููุฌุงู ุงูุฏููู ูุงูุฑูุญู</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="recreational-tab" data-bs-toggle="tab" data-bs-target="#recreational" type="button" role="tab" aria-controls="recreational" aria-selected="false">ุงููุฌุงู ุงูุชุฑูููู ูุงูุฑูุงุถู</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="suggestions-tab" data-bs-toggle="tab" data-bs-target="#suggestions" type="button" role="tab" aria-controls="suggestions" aria-selected="false">ุงูุงูุชุฑุงุญุงุช ูุงูููุงุญุธุงุช</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="organizations-tab" data-bs-toggle="tab" data-bs-target="#organizations" type="button" role="tab" aria-controls="organizations" aria-selected="false">ุชูุงุฑูุฑ ุงูููุธูุงุช</button>
                </li>
            </ul>
            
            <div class="tab-content" id="dashboardTabsContent">
                <!-- ููุฎุต ุงููุชุงุฆุฌ -->
                <div class="tab-pane fade show active" id="summary" role="tabpanel" aria-labelledby="summary-tab">
                    <div class="dashboard-card">
                        <h3>ููุฎุต ูุชุงุฆุฌ ุงูุงุณุชุจูุงู</h3>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="chart-container">
                                    <canvas id="participantsChart"></canvas>
                                </div>
                                <h4 class="text-center mt-3">ุชูุฒูุน ุงููุดุงุฑููู ุญุณุจ ุงููุณูู ุงููุธููู</h4>
                            </div>
                            <div class="col-md-6">
                                <div class="chart-container">
                                    <canvas id="domainsChart"></canvas>
                                </div>
                                <h4 class="text-center mt-3">ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ุญุณุจ ุงููุฌุงูุงุช</h4>
                            </div>
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-md-6">
                                <div class="chart-container">
                                    <canvas id="experienceChart"></canvas>
                                </div>
                                <h4 class="text-center mt-3">ุชูุฒูุน ุงููุดุงุฑููู ุญุณุจ ุณููุงุช ุงูุฎุจุฑุฉ</h4>
                            </div>
                            <div class="col-md-6">
                                <div class="chart-container">
                                    <canvas id="countriesChart"></canvas>
                                </div>
                                <h4 class="text-center mt-3">ุชูุฒูุน ุงููุดุงุฑููู ุญุณุจ ุงูุฏูู</h4>
                            </div>
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-12">
                                <h4>ุฅุญุตุงุฆูุงุช ุนุงูุฉ</h4>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>ุงูุจูุงู</th>
                                                <th>ุงูุนุฏุฏ/ุงููุณุจุฉ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="statisticsTable">
                                            <tr>
                                                <td>ุฅุฌูุงูู ุนุฏุฏ ุงููุดุงุฑููู</td>
                                                <td id="totalParticipants">0</td>
                                            </tr>
                                            <tr>
                                                <td>ุนุฏุฏ ุงูููุธูุงุช ุงููุดุงุฑูุฉ</td>
                                                <td id="totalOrganizations">0</td>
                                            </tr>
                                            <tr>
                                                <td>ูุณุจุฉ ุงููุดุงุฑููู ุงูุฐูู ุณุจู ููู ุงูุญุตูู ุนูู ุชุฏุฑูุจ</td>
                                                <td id="previousTrainingPercentage">0%</td>
                                            </tr>
                                            <tr>
                                                <td>ุงููุฌุงู ุฐู ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ุงูุฃุนูู</td>
                                                <td id="highestNeedDomain">-</td>
                                            </tr>
                                            <tr>
                                                <td>ุงููุฌุงู ุฐู ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ุงูุฃุฏูู</td>
                                                <td id="lowestNeedDomain">-</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ุงููุฌุงู ุงูููุณู ูุงูุงุฌุชูุงุนู -->
                <div class="tab-pane fade" id="psychological" role="tabpanel" aria-labelledby="psychological-tab">
                    <div class="dashboard-card">
                        <h3>ุงููุฌุงู ุงูููุณู ูุงูุงุฌุชูุงุนู</h3>
                        <div class="row">
                            <div class="col-md-8">
                                <div class="chart-container">
                                    <canvas id="psychologicalChart"></canvas>
                                </div>
                                <h4 class="text-center mt-3">ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ููููุงุฑุงุช ุงูููุณูุฉ ูุงูุงุฌุชูุงุนูุฉ</h4>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0">ุฃุนูู ุงูููุงุฑุงุช ุงุญุชูุงุฌุงู</h5>
                                    </div>
                                    <div class="card-body">
                                        <ol id="topPsychologicalSkills">
                                            <li>ููุงุฑุงุช ุงูุชุนุงูู ูุน ุงูุตุฏูุงุช ุงูููุณูุฉ ูุฏู ุงูุฃูุชุงู</li>
                                            <li>ููุงุฑุงุช ุงูุฅุฑุดุงุฏ ุงูููุณู ููุฃูุชุงู</li>
                                            <li>ุงุณุชุฑุงุชูุฌูุงุช ุฏูุฌ ุงูุฃูุชุงู ูู ุงููุฌุชูุน</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-12">
                                <h4>ุชูุงุตูู ุงูุงุญุชูุงุฌุงุช ุงูุชุฏุฑูุจูุฉ ุญุณุจ ุงููุณูู ุงููุธููู</h4>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>ุงูููุงุฑุฉ/ุงูููุถูุน</th>
                                                <th>ูุฏูุฑ</th>
                                                <th>ุฃุฎุตุงุฆู ููุณู</th>
                                                <th>ุฃุฎุตุงุฆู ุงุฌุชูุงุนู</th>
                                                <th>ูุนูู</th>
                                                <th>ููุฏู ุฑุนุงูุฉ</th>
                                                <th>ุงููุชูุณุท ุงูุนุงู</th>
                                            </tr>
                                        </thead>
                                        <tbody id="psychologicalTable">
                                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุฏููุงููููุงู -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ุงููุฌุงู ุงูุชุฑุจูู ูุงูุชุนูููู -->
                <div class="tab-pane fade" id="educational" role="tabpanel" aria-labelledby="educational-tab">
                    <div class="dashboard-card">
                        <h3>ุงููุฌุงู ุงูุชุฑุจูู ูุงูุชุนูููู</h3>
                        <div class="row">
                            <div class="col-md-8">
                                <div class="chart-container">
                                    <canvas id="educationalChart"></canvas>
                                </div>
                                <h4 class="text-center mt-3">ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ููููุงุฑุงุช ุงูุชุฑุจููุฉ ูุงูุชุนููููุฉ</h4>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header bg-success text-white">
                                        <h5 class="mb-0">ุฃุนูู ุงูููุงุฑุงุช ุงุญุชูุงุฌุงู</h5>
                                    </div>
                                    <div class="card-body">
                                        <ol id="topEducationalSkills">
                                            <li>ุงุณุชุฑุงุชูุฌูุงุช ุงูุชุนุงูู ูุน ุตุนูุจุงุช ุงูุชุนูู</li>
                                            <li>ููุงุฑุงุช ุงูุชุดุงู ูุชูููุฉ ุงูููุงูุจ ูุฏู ุงูุฃูุชุงู</li>
                                            <li>ุฃุณุงููุจ ุงูุชุญููุฒ ูุชุนุฒูุฒ ุงูุฏุงูุนูุฉ ููุชุนูู</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-12">
                                <h4>ุชูุงุตูู ุงูุงุญุชูุงุฌุงุช ุงูุชุฏุฑูุจูุฉ ุญุณุจ ุงููุณูู ุงููุธููู</h4>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>ุงูููุงุฑุฉ/ุงูููุถูุน</th>
                                                <th>ูุฏูุฑ</th>
                                                <th>ุฃุฎุตุงุฆู ููุณู</th>
                                                <th>ุฃุฎุตุงุฆู ุงุฌุชูุงุนู</th>
                                                <th>ูุนูู</th>
                                                <th>ููุฏู ุฑุนุงูุฉ</th>
                                                <th>ุงููุชูุณุท ุงูุนุงู</th>
                                            </tr>
                                        </thead>
                                        <tbody id="educationalTable">
                                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุฏููุงููููุงู -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ุงููุฌุงู ุงูุตุญู ูุงูุทุจู -->
                <div class="tab-pane fade" id="medical" role="tabpanel" aria-labelledby="medical-tab">
                    <div class="dashboard-card">
                        <h3>ุงููุฌุงู ุงูุตุญู ูุงูุทุจู</h3>
                        <div class="row">
                            <div class="col-md-8">
                                <div class="chart-container">
                                    <canvas id="medicalChart"></canvas>
                                </div>
                                <h4 class="text-center mt-3">ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ููููุงุฑุงุช ุงูุตุญูุฉ ูุงูุทุจูุฉ</h4>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header bg-info text-white">
                                        <h5 class="mb-0">ุฃุนูู ุงูููุงุฑุงุช ุงุญุชูุงุฌุงู</h5>
                                    </div>
                                    <div class="card-body">
                                        <ol id="topMedicalSkills">
                                            <li>ุฃุณุงุณูุงุช ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ</li>
                                            <li>ููุงุฑุงุช ุงูุชุนุงูู ูุน ุงูุฃูุฑุงุถ ุงูุดุงุฆุนุฉ</li>
                                            <li>ููุงุฑุงุช ุงูุฑุนุงูุฉ ุงูุตุญูุฉ ุงูุฃุณุงุณูุฉ ููุฃูุชุงู</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-12">
                                <h4>ุชูุงุตูู ุงูุงุญุชูุงุฌุงุช ุงูุชุฏุฑูุจูุฉ ุญุณุจ ุงููุณูู ุงููุธููู</h4>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>ุงูููุงุฑุฉ/ุงูููุถูุน</th>
                                                <th>ูุฏูุฑ</th>
                                                <th>ุฃุฎุตุงุฆู ููุณู</th>
                                                <th>ุฃุฎุตุงุฆู ุงุฌุชูุงุนู</th>
                                                <th>ูุนูู</th>
                                                <th>ููุฏู ุฑุนุงูุฉ</th>
                                                <th>ุงููุชูุณุท ุงูุนุงู</th>
                                            </tr>
                                        </thead>
                                        <tbody id="medicalTable">
                                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุฏููุงููููุงู -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ุงููุฌุงู ุงูุฏููู ูุงูุฑูุญู -->
                <div class="tab-pane fade" id="religious" role="tabpanel" aria-labelledby="religious-tab">
                    <div class="dashboard-card">
                        <h3>ุงููุฌุงู ุงูุฏููู ูุงูุฑูุญู</h3>
                        <div class="row">
                            <div class="col-md-8">
                                <div class="chart-container">
                                    <canvas id="religiousChart"></canvas>
                                </div>
                                <h4 class="text-center mt-3">ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ููููุงุฑุงุช ุงูุฏูููุฉ ูุงูุฑูุญูุฉ</h4>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header bg-warning text-dark">
                                        <h5 class="mb-0">ุฃุนูู ุงูููุงุฑุงุช ุงุญุชูุงุฌุงู</h5>
                                    </div>
                                    <div class="card-body">
                                        <ol id="topReligiousSkills">
                                            <li>ุฃุณุงููุจ ุบุฑุณ ุงูููู ุงูุฏูููุฉ ูุฏู ุงูุฃูุชุงู</li>
                                            <li>ููุงุฑุงุช ุชุนููู ุงูุนุจุงุฏุงุช ุจุทุฑููุฉ ูุญุจุจุฉ</li>
                                            <li>ููุงุฑุงุช ุฑุจุท ุงูุฃุญูุงู ุงูุดุฑุนูุฉ ุจุงูุญูุงุฉ ุงูููููุฉ</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-12">
                                <h4>ุชูุงุตูู ุงูุงุญุชูุงุฌุงุช ุงูุชุฏุฑูุจูุฉ ุญุณุจ ุงููุณูู ุงููุธููู</h4>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>ุงูููุงุฑุฉ/ุงูููุถูุน</th>
                                                <th>ูุฏูุฑ</th>
                                                <th>ุฃุฎุตุงุฆู ููุณู</th>
                                                <th>ุฃุฎุตุงุฆู ุงุฌุชูุงุนู</th>
                                                <th>ูุนูู</th>
                                                <th>ููุฏู ุฑุนุงูุฉ</th>
                                                <th>ุงููุชูุณุท ุงูุนุงู</th>
                                            </tr>
                                        </thead>
                                        <tbody id="religiousTable">
                                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุฏููุงููููุงู -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ุงููุฌุงู ุงูุชุฑูููู ูุงูุฑูุงุถู -->
                <div class="tab-pane fade" id="recreational" role="tabpanel" aria-labelledby="recreational-tab">
                    <div class="dashboard-card">
                        <h3>ุงููุฌุงู ุงูุชุฑูููู ูุงูุฑูุงุถู</h3>
                        <div class="row">
                            <div class="col-md-8">
                                <div class="chart-container">
                                    <canvas id="recreationalChart"></canvas>
                                </div>
                                <h4 class="text-center mt-3">ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ููููุงุฑุงุช ุงูุชุฑููููุฉ ูุงูุฑูุงุถูุฉ</h4>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header bg-danger text-white">
                                        <h5 class="mb-0">ุฃุนูู ุงูููุงุฑุงุช ุงุญุชูุงุฌุงู</h5>
                                    </div>
                                    <div class="card-body">
                                        <ol id="topRecreationalSkills">
                                            <li>ููุงุฑุงุช ุชุตููู ุงูุฃูุดุทุฉ ุงูุชุฑููููุฉ</li>
                                            <li>ุฃุณุงููุจ ุชูุธูู ุงูุฑุญูุงุช ูุงููุนุณูุฑุงุช</li>
                                            <li>ููุงุฑุงุช ุชูุธูู ุงููุณุงุจูุงุช ูุงููุนุงููุงุช</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-12">
                                <h4>ุชูุงุตูู ุงูุงุญุชูุงุฌุงุช ุงูุชุฏุฑูุจูุฉ ุญุณุจ ุงููุณูู ุงููุธููู</h4>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>ุงูููุงุฑุฉ/ุงูููุถูุน</th>
                                                <th>ูุฏูุฑ</th>
                                                <th>ุฃุฎุตุงุฆู ููุณู</th>
                                                <th>ุฃุฎุตุงุฆู ุงุฌุชูุงุนู</th>
                                                <th>ูุนูู</th>
                                                <th>ููุฏู ุฑุนุงูุฉ</th>
                                                <th>ุงููุชูุณุท ุงูุนุงู</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recreationalTable">
                                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุฏููุงููููุงู -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ุงูุงูุชุฑุงุญุงุช ูุงูููุงุญุธุงุช -->
                <div class="tab-pane fade" id="suggestions" role="tabpanel" aria-labelledby="suggestions-tab">
                    <div class="dashboard-card">
                        <h3>ุงูุงูุชุฑุงุญุงุช ูุงูููุงุญุธุงุช</h3>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h4>ุงููุฌุงูุงุช ุงูุชุฏุฑูุจูุฉ ุงูุฃุฎุฑู ุงูููุชุฑุญุฉ</h4>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>#</th>
                                                <th>ุงููุฌุงู ุงูููุชุฑุญ</th>
                                                <th>ุงูุชูุฑุงุฑ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="otherAreasTable">
                                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุฏููุงููููุงู -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <h4>ุงูุชุฑุงุญุงุช ุชุทููุฑ ุงูุจุฑุงูุฌ ุงูุชุฏุฑูุจูุฉ</h4>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>#</th>
                                                <th>ุงูุงูุชุฑุงุญ</th>
                                                <th>ุงูุชูุฑุงุฑ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="suggestionsTable">
                                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุฏููุงููููุงู -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-12">
                                <h4>ุชูุงุตูู ุงูุงูุชุฑุงุญุงุช ูุงูููุงุญุธุงุช</h4>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>ุงูููุธูุฉ</th>
                                                <th>ุงููุณูู ุงููุธููู</th>
                                                <th>ุงููุฌุงูุงุช ุงูุชุฏุฑูุจูุฉ ุงูููุชุฑุญุฉ</th>
                                                <th>ุงูุชุฑุงุญุงุช ุงูุชุทููุฑ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="detailedSuggestionsTable">
                                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุฏููุงููููุงู -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ุชูุงุฑูุฑ ุงูููุธูุงุช -->
                <div class="tab-pane fade" id="organizations" role="tabpanel" aria-labelledby="organizations-tab">
                    <div class="dashboard-card">
                        <h3>ุชูุงุฑูุฑ ุงูููุธูุงุช</h3>
                        
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="organizationFilter" class="form-label">ุงุฎุชุฑ ุงูููุธูุฉ:</label>
                                    <select class="form-select" id="organizationFilter">
                                        <option value="all">ุฌููุน ุงูููุธูุงุช</option>
                                        <!-- ุณูุชู ููุก ูุฐู ุงููุงุฆูุฉ ุฏููุงููููุงู -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="organizationCodeFilter" class="form-label">ููุฏ ุงูููุธูุฉ:</label>
                                    <input type="text" class="form-control" id="organizationCodeFilter" placeholder="ุฃุฏุฎู ููุฏ ุงูููุธูุฉ">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="chart-container">
                                    <canvas id="organizationDomainsChart"></canvas>
                                </div>
                                <h4 class="text-center mt-3">ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ุญุณุจ ุงููุฌุงูุงุช</h4>
                            </div>
                            <div class="col-md-6">
                                <div class="chart-container">
                                    <canvas id="organizationJobsChart"></canvas>
                                </div>
                                <h4 class="text-center mt-3">ุชูุฒูุน ุงููุดุงุฑููู ุญุณุจ ุงููุณูู ุงููุธููู</h4>
                            </div>
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-12">
                                <h4>ุชูุงุตูู ุงูุงุญุชูุงุฌุงุช ุงูุชุฏุฑูุจูุฉ ููููุธูุฉ</h4>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>ุงููุฌุงู</th>
                                                <th>ุงูููุงุฑุฉ/ุงูููุถูุน</th>
                                                <th>ูุชูุณุท ุงูุงุญุชูุงุฌ</th>
                                                <th>ุงูุชุฑุชูุจ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="organizationDetailsTable">
                                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุฏููุงููููุงู -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-12">
                                <h4>ุงููุดุงุฑููู ูู ุงูููุธูุฉ</h4>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>ุงูุงุณู</th>
                                                <th>ุงููุณูู ุงููุธููู</th>
                                                <th>ุณููุงุช ุงูุฎุจุฑุฉ</th>
                                                <th>ุงููุฆุฉ ุงูุนูุฑูุฉ ููุฃูุชุงู</th>
                                                <th>ููุน ุงูุฑุนุงูุฉ ุงูููุฏูุฉ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="organizationParticipantsTable">
                                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุฏููุงููููุงู -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ... ุจุงูู ุงูููุฏ ... -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- ุจุฏู ูู ุงุณุชุฏุนุงุก ููู ุฎุงุฑุฌู dashboard.js -->
<!-- ุงูุตู ูู ููุฏ JavaScript ุฏุงุฎู ูุฐุง ุงููุณู ูุจุงุดุฑุฉ -->
<script>

// ููู JavaScript ูููุญุฉ ุงูุชุญูู - ูุณุฎุฉ v2 ูุงููุฉ

document.addEventListener('DOMContentLoaded', function() {
    console.log("๐ฅ ุจุฏุก ุชุญููู ุจูุงูุงุช ุงูุงุณุชุจูุงู...");
    fetchSurveyData();

    const orgFilter = document.getElementById('organizationFilter');
    const codeFilter = document.getElementById('organizationCodeFilter');

    if (orgFilter) {
        orgFilter.addEventListener('change', filterOrganizationData);
    }

    if (codeFilter) {
        codeFilter.addEventListener('input', filterOrganizationByCode);
    }
});

async function fetchSurveyData() {
    try {
        const response = await fetch('/api/survey-data');
        if (!response.ok) {
            throw new Error('ูุดู ูู ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช');
        }

        const data = await response.json();
        console.log("โ ุงูุจูุงูุงุช ุงููุณุชููุฉ:", data);

        if (data && data.length > 0) {
            updateGeneralStatistics(data);
            createCharts(data);
            updateTables(data);
            updateOrganizationsList(data);
        } else {
            showNoDataMessage();
        }
    } catch (error) {
        console.error('โ ุฎุทุฃ ูู ุงุณุชุฑุฌุงุน ุจูุงูุงุช ุงูุงุณุชุจูุงู:', error);
        showErrorMessage();
    }
}

// ๐ ุณูุชู ุชุถููู ุฌููุน ุงูุฏูุงู ูู ุงููุณุฎุฉ ุงููุงููุฉ ุงูุณุงุจูุฉ ุงูุชู ุฃุฑุณููุง ุงููุณุชุฎุฏู

// ููู JavaScript ูููุญุฉ ุงูุชุญูู
document.addEventListener('DOMContentLoaded', function() {
    // ุงุณุชุฏุนุงุก ุจูุงูุงุช ุงูุงุณุชุจูุงู ูู ุงูุฎุงุฏู
    fetchSurveyData();
    
    // ุฅุถุงูุฉ ูุณุชูุนู ุงูุฃุญุฏุงุซ ููููุงุชุฑ
    document.getElementById('organizationFilter').addEventListener('change', filterOrganizationData);
    document.getElementById('organizationCodeFilter').addEventListener('input', filterOrganizationByCode);
});

// ุงุณุชุฏุนุงุก ุจูุงูุงุช ุงูุงุณุชุจูุงู
async function fetchSurveyData() {
    try {
        const response = await fetch('/api/survey-data');
        if (!response.ok) {
            throw new Error('ูุดู ูู ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช');
        }
        
        const data = await response.json();
        if (data && data.length > 0) {
            // ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช ุงูุนุงูุฉ
            updateGeneralStatistics(data);
            
            // ุชุญุฏูุซ ุงูุฑุณูู ุงูุจูุงููุฉ
            createCharts(data);
            
            // ุชุญุฏูุซ ุงูุฌุฏุงูู
            updateTables(data);
            
            // ุชุญุฏูุซ ูุงุฆูุฉ ุงูููุธูุงุช
            updateOrganizationsList(data);
        } else {
            showNoDataMessage();
        }
    } catch (error) {
        console.error('ุฎุทุฃ ูู ุงุณุชุฑุฌุงุน ุจูุงูุงุช ุงูุงุณุชุจูุงู:', error);
        showErrorMessage();
    }
}

// ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช ุงูุนุงูุฉ
function updateGeneralStatistics(data) {
    // ุนุฏุฏ ุงููุดุงุฑููู
    document.getElementById('totalParticipants').textContent = data.length;
    
    // ุนุฏุฏ ุงูููุธูุงุช
    const organizations = [...new Set(data.map(item => item.organization))];
    document.getElementById('totalOrganizations').textContent = organizations.length;
    
    // ูุณุจุฉ ุงููุดุงุฑููู ุงูุฐูู ุณุจู ููู ุงูุญุตูู ุนูู ุชุฏุฑูุจ
    const previousTrainingCount = data.filter(item => item.previousTraining === 'ูุนู').length;
    const previousTrainingPercentage = ((previousTrainingCount / data.length) * 100).toFixed(1);
    document.getElementById('previousTrainingPercentage').textContent = `${previousTrainingPercentage}%`;
    
    // ุญุณุงุจ ูุชูุณุท ุงูุงุญุชูุงุฌ ููู ูุฌุงู
    const domains = {
        'ุงูููุณู ูุงูุงุฌุชูุงุนู': calculateDomainAverage(data, ['psychologicalTrauma', 'selfConfidence', 'psychologicalCounseling', 'socialIntegration', 'effectiveCommunication']),
        'ุงูุชุฑุจูู ูุงูุชุนูููู': calculateDomainAverage(data, ['modernTeaching', 'learningDifficulties', 'talentDevelopment', 'motivationTechniques', 'careerGuidance']),
        'ุงูุตุญู ูุงูุทุจู': calculateDomainAverage(data, ['firstAid', 'healthCare', 'nutrition', 'commonDiseases', 'personalHygiene']),
        'ุงูุฏููู ูุงูุฑูุญู': calculateDomainAverage(data, ['religiousValues', 'teachingWorship', 'spiritualAwareness', 'religiousRules', 'religiousIdentity']),
        'ุงูุชุฑูููู ูุงูุฑูุงุถู': calculateDomainAverage(data, ['recreationalActivities', 'tripsOrganization', 'eventsOrganization', 'leisureTime', 'sportsTraining'])
    };
    
    // ุชุญุฏูุฏ ุงููุฌุงู ุฐู ุงูุงุญุชูุงุฌ ุงูุฃุนูู ูุงูุฃุฏูู
    const sortedDomains = Object.entries(domains).sort((a, b) => b[1] - a[1]);
    document.getElementById('highestNeedDomain').textContent = `ุงููุฌุงู ${sortedDomains[0][0]} (${sortedDomains[0][1].toFixed(2)})`;
    document.getElementById('lowestNeedDomain').textContent = `ุงููุฌุงู ${sortedDomains[sortedDomains.length - 1][0]} (${sortedDomains[sortedDomains.length - 1][1].toFixed(2)})`;
}

// ุญุณุงุจ ูุชูุณุท ุงูุงุญุชูุงุฌ ููุฌุงู ูุนูู
function calculateDomainAverage(data, fields) {
    let sum = 0;
    let count = 0;
    
    data.forEach(item => {
        fields.forEach(field => {
            if (item[field]) {
                sum += parseInt(item[field]);
                count++;
            }
        });
    });
    
    return count > 0 ? sum / count : 0;
}

// ุฅูุดุงุก ุงูุฑุณูู ุงูุจูุงููุฉ
function createCharts(data) {
    // ุฑุณู ุจูุงูู ูุชูุฒูุน ุงููุดุงุฑููู ุญุณุจ ุงููุณูู ุงููุธููู
    createJobTitleChart(data);
    
    // ุฑุณู ุจูุงูู ููุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ุญุณุจ ุงููุฌุงูุงุช
    createDomainsChart(data);
    
    // ุฑุณู ุจูุงูู ูุชูุฒูุน ุงููุดุงุฑููู ุญุณุจ ุณููุงุช ุงูุฎุจุฑุฉ
    createExperienceChart(data);
    
    // ุฑุณู ุจูุงูู ูุชูุฒูุน ุงููุดุงุฑููู ุญุณุจ ุงูุฏูู
    createCountriesChart(data);
    
    // ุฑุณูู ุจูุงููุฉ ูููุฌุงูุงุช ุงููุฎุชููุฉ
    createPsychologicalChart(data);
    createEducationalChart(data);
    createMedicalChart(data);
    createReligiousChart(data);
    createRecreationalChart(data);
}

// ุฑุณู ุจูุงูู ูุชูุฒูุน ุงููุดุงุฑููู ุญุณุจ ุงููุณูู ุงููุธููู
function createJobTitleChart(data) {
    const jobTitles = {};
    data.forEach(item => {
        if (item.jobTitle) {
            jobTitles[item.jobTitle] = (jobTitles[item.jobTitle] || 0) + 1;
        }
    });
    
    const labels = Object.keys(jobTitles);
    const values = Object.values(jobTitles);
    
    const ctx = document.getElementById('participantsChart').getContext('2d');
    new Chart(ctx, {
        type: 'pie',
        data: {
            labels: labels,
            datasets: [{
                data: values,
                backgroundColor: [
                    '#4e73df',
                    '#1cc88a',
                    '#36b9cc',
                    '#f6c23e',
                    '#e74a3b',
                    '#858796'
                ]
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'right'
                }
            }
        }
    });
}

// ุฑุณู ุจูุงูู ููุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ุญุณุจ ุงููุฌุงูุงุช
function createDomainsChart(data) {
    const domains = {
        'ุงูููุณู ูุงูุงุฌุชูุงุนู': calculateDomainAverage(data, ['psychologicalTrauma', 'selfConfidence', 'psychologicalCounseling', 'socialIntegration', 'effectiveCommunication']),
        'ุงูุชุฑุจูู ูุงูุชุนูููู': calculateDomainAverage(data, ['modernTeaching', 'learningDifficulties', 'talentDevelopment', 'motivationTechniques', 'careerGuidance']),
        'ุงูุตุญู ูุงูุทุจู': calculateDomainAverage(data, ['firstAid', 'healthCare', 'nutrition', 'commonDiseases', 'personalHygiene']),
        'ุงูุฏููู ูุงูุฑูุญู': calculateDomainAverage(data, ['religiousValues', 'teachingWorship', 'spiritualAwareness', 'religiousRules', 'religiousIdentity']),
        'ุงูุชุฑูููู ูุงูุฑูุงุถู': calculateDomainAverage(data, ['recreationalActivities', 'tripsOrganization', 'eventsOrganization', 'leisureTime', 'sportsTraining'])
    };
    
    const labels = Object.keys(domains);
    const values = Object.values(domains);
    
    const ctx = document.getElementById('domainsChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู',
                data: values,
                backgroundColor: [
                    '#4e73df',
                    '#1cc88a',
                    '#36b9cc',
                    '#f6c23e',
                    '#e74a3b'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 5
                }
            }
        }
    });
}

// ุฑุณู ุจูุงูู ูุชูุฒูุน ุงููุดุงุฑููู ุญุณุจ ุณููุงุช ุงูุฎุจุฑุฉ
function createExperienceChart(data) {
    const experience = {};
    data.forEach(item => {
        if (item.experience) {
            experience[item.experience] = (experience[item.experience] || 0) + 1;
        }
    });
    
    const labels = Object.keys(experience);
    const values = Object.values(experience);
    
    const ctx = document.getElementById('experienceChart').getContext('2d');
    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: labels,
            datasets: [{
                data: values,
                backgroundColor: [
                    '#4e73df',
                    '#1cc88a',
                    '#36b9cc',
                    '#f6c23e',
                    '#e74a3b'
                ]
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'right'
                }
            }
        }
    });
}

// ุฑุณู ุจูุงูู ูุชูุฒูุน ุงููุดุงุฑููู ุญุณุจ ุงูุฏูู
function createCountriesChart(data) {
    const countries = {};
    data.forEach(item => {
        if (item.country) {
            countries[item.country] = (countries[item.country] || 0) + 1;
        }
    });
    
    const labels = Object.keys(countries);
    const values = Object.values(countries);
    
    const ctx = document.getElementById('countriesChart').getContext('2d');
    new Chart(ctx, {
        type: 'pie',
        data: {
            labels: labels,
            datasets: [{
                data: values,
                backgroundColor: [
                    '#4e73df',
                    '#1cc88a',
                    '#36b9cc',
                    '#f6c23e',
                    '#e74a3b',
                    '#858796'
                ]
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'right'
                }
            }
        }
    });
}

// ุฑุณู ุจูุงูู ูููุฌุงู ุงูููุณู ูุงูุงุฌุชูุงุนู
function createPsychologicalChart(data) {
    const skills = {
        'ููุงุฑุงุช ุงูุชุนุงูู ูุน ุงูุตุฏูุงุช ุงูููุณูุฉ': calculateFieldAverage(data, 'psychologicalTrauma'),
        'ุฃุณุงููุจ ุจูุงุก ุงูุซูุฉ ุจุงูููุณ ูุชูุฏูุฑ ุงูุฐุงุช': calculateFieldAverage(data, 'selfConfidence'),
        'ููุงุฑุงุช ุงูุฅุฑุดุงุฏ ุงูููุณู': calculateFieldAverage(data, 'psychologicalCounseling'),
        'ุงุณุชุฑุงุชูุฌูุงุช ุฏูุฌ ุงูุฃูุชุงู ูู ุงููุฌุชูุน': calculateFieldAverage(data, 'socialIntegration'),
        'ููุงุฑุงุช ุงูุชูุงุตู ุงููุนุงู': calculateFieldAverage(data, 'effectiveCommunication')
    };
    
    const labels = Object.keys(skills);
    const values = Object.values(skills);
    
    const ctx = document.getElementById('psychologicalChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู',
                data: values,
                backgroundColor: '#4e73df',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 5
                }
            }
        }
    });
    
    // ุชุญุฏูุซ ูุงุฆูุฉ ุฃุนูู ุงูููุงุฑุงุช ุงุญุชูุงุฌุงู
    updateTopSkillsList('topPsychologicalSkills', skills);
}

// ุฑุณู ุจูุงูู ูููุฌุงู ุงูุชุฑุจูู ูุงูุชุนูููู
function createEducationalChart(data) {
    const skills = {
        'ุฃุณุงููุจ ุงูุชุนููู ุงูุญุฏูุซุฉ': calculateFieldAverage(data, 'modernTeaching'),
        'ุงุณุชุฑุงุชูุฌูุงุช ุงูุชุนุงูู ูุน ุตุนูุจุงุช ุงูุชุนูู': calculateFieldAverage(data, 'learningDifficulties'),
        'ููุงุฑุงุช ุงูุชุดุงู ูุชูููุฉ ุงูููุงูุจ': calculateFieldAverage(data, 'talentDevelopment'),
        'ุฃุณุงููุจ ุงูุชุญููุฒ ูุชุนุฒูุฒ ุงูุฏุงูุนูุฉ': calculateFieldAverage(data, 'motivationTechniques'),
        'ููุงุฑุงุช ุงูุชูุฌูู ุงููููู': calculateFieldAverage(data, 'careerGuidance')
    };
    
    const labels = Object.keys(skills);
    const values = Object.values(skills);
    
    const ctx = document.getElementById('educationalChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู',
                data: values,
                backgroundColor: '#1cc88a',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 5
                }
            }
        }
    });
    
    // ุชุญุฏูุซ ูุงุฆูุฉ ุฃุนูู ุงูููุงุฑุงุช ุงุญุชูุงุฌุงู
    updateTopSkillsList('topEducationalSkills', skills);
}

// ุฑุณู ุจูุงูู ูููุฌุงู ุงูุตุญู ูุงูุทุจู
function createMedicalChart(data) {
    const skills = {
        'ุฃุณุงุณูุงุช ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ': calculateFieldAverage(data, 'firstAid'),
        'ููุงุฑุงุช ุงูุฑุนุงูุฉ ุงูุตุญูุฉ ุงูุฃุณุงุณูุฉ': calculateFieldAverage(data, 'healthCare'),
        'ุฃุณุงููุจ ุงูุชุบุฐูุฉ ุงูุณูููุฉ': calculateFieldAverage(data, 'nutrition'),
        'ููุงุฑุงุช ุงูุชุนุงูู ูุน ุงูุฃูุฑุงุถ ุงูุดุงุฆุนุฉ': calculateFieldAverage(data, 'commonDiseases'),
        'ุฃุณุงููุจ ุชุนุฒูุฒ ุงููุธุงูุฉ ุงูุดุฎุตูุฉ': calculateFieldAverage(data, 'personalHygiene')
    };
    
    const labels = Object.keys(skills);
    const values = Object.values(skills);
    
    const ctx = document.getElementById('medicalChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู',
                data: values,
                backgroundColor: '#36b9cc',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 5
                }
            }
        }
    });
    
    // ุชุญุฏูุซ ูุงุฆูุฉ ุฃุนูู ุงูููุงุฑุงุช ุงุญุชูุงุฌุงู
    updateTopSkillsList('topMedicalSkills', skills);
}

// ุฑุณู ุจูุงูู ูููุฌุงู ุงูุฏููู ูุงูุฑูุญู
function createReligiousChart(data) {
    const skills = {
        'ุฃุณุงููุจ ุบุฑุณ ุงูููู ุงูุฏูููุฉ': calculateFieldAverage(data, 'religiousValues'),
        'ููุงุฑุงุช ุชุนููู ุงูุนุจุงุฏุงุช ุจุทุฑููุฉ ูุญุจุจุฉ': calculateFieldAverage(data, 'teachingWorship'),
        'ุฃุณุงููุจ ุชูููุฉ ุงููุงุฒุน ุงูุฏููู': calculateFieldAverage(data, 'spiritualAwareness'),
        'ููุงุฑุงุช ุฑุจุท ุงูุฃุญูุงู ุงูุดุฑุนูุฉ ุจุงูุญูุงุฉ': calculateFieldAverage(data, 'religiousRules'),
        'ุฃุณุงููุจ ุชุนุฒูุฒ ุงููููุฉ ุงูุฏูููุฉ': calculateFieldAverage(data, 'religiousIdentity')
    };
    
    const labels = Object.keys(skills);
    const values = Object.values(skills);
    
    const ctx = document.getElementById('religiousChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู',
                data: values,
                backgroundColor: '#f6c23e',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 5
                }
            }
        }
    });
    
    // ุชุญุฏูุซ ูุงุฆูุฉ ุฃุนูู ุงูููุงุฑุงุช ุงุญุชูุงุฌุงู
    updateTopSkillsList('topReligiousSkills', skills);
}

// ุฑุณู ุจูุงูู ูููุฌุงู ุงูุชุฑูููู ูุงูุฑูุงุถู
function createRecreationalChart(data) {
    const skills = {
        'ููุงุฑุงุช ุชุตููู ุงูุฃูุดุทุฉ ุงูุชุฑููููุฉ': calculateFieldAverage(data, 'recreationalActivities'),
        'ุฃุณุงููุจ ุชูุธูู ุงูุฑุญูุงุช ูุงููุนุณูุฑุงุช': calculateFieldAverage(data, 'tripsOrganization'),
        'ููุงุฑุงุช ุชูุธูู ุงููุณุงุจูุงุช ูุงููุนุงููุงุช': calculateFieldAverage(data, 'eventsOrganization'),
        'ุฃุณุงููุจ ุงุณุชุซูุงุฑ ุฃููุงุช ุงููุฑุงุบ': calculateFieldAverage(data, 'leisureTime'),
        'ููุงุฑุงุช ุชุฏุฑูุจ ุงูุฃูุนุงุจ ุงูุฑูุงุถูุฉ': calculateFieldAverage(data, 'sportsTraining')
    };
    
    const labels = Object.keys(skills);
    const values = Object.values(skills);
    
    const ctx = document.getElementById('recreationalChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู',
                data: values,
                backgroundColor: '#e74a3b',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 5
                }
            }
        }
    });
    
    // ุชุญุฏูุซ ูุงุฆูุฉ ุฃุนูู ุงูููุงุฑุงุช ุงุญุชูุงุฌุงู
    updateTopSkillsList('topRecreationalSkills', skills);
}

// ุญุณุงุจ ูุชูุณุท ุงูุงุญุชูุงุฌ ูุญูู ูุนูู
function calculateFieldAverage(data, field) {
    let sum = 0;
    let count = 0;
    
    data.forEach(item => {
        if (item[field]) {
            sum += parseInt(item[field]);
            count++;
        }
    });
    
    return count > 0 ? sum / count : 0;
}

// ุชุญุฏูุซ ูุงุฆูุฉ ุฃุนูู ุงูููุงุฑุงุช ุงุญุชูุงุฌุงู
function updateTopSkillsList(elementId, skills) {
    const sortedSkills = Object.entries(skills).sort((a, b) => b[1] - a[1]);
    const topSkillsList = document.getElementById(elementId);
    
    topSkillsList.innerHTML = '';
    
    for (let i = 0; i < Math.min(3, sortedSkills.length); i++) {
        const li = document.createElement('li');
        li.textContent = `${sortedSkills[i][0]} (${sortedSkills[i][1].toFixed(2)})`;
        topSkillsList.appendChild(li);
    }
}

// ุชุญุฏูุซ ุงูุฌุฏุงูู
function updateTables(data) {
    // ุชุญุฏูุซ ุฌุฏุงูู ุงููุฌุงูุงุช ุงููุฎุชููุฉ
    updateDomainTable(data, 'psychologicalTable', [
        { field: 'psychologicalTrauma', label: 'ููุงุฑุงุช ุงูุชุนุงูู ูุน ุงูุตุฏูุงุช ุงูููุณูุฉ' },
        { field: 'selfConfidence', label: 'ุฃุณุงููุจ ุจูุงุก ุงูุซูุฉ ุจุงูููุณ ูุชูุฏูุฑ ุงูุฐุงุช' },
        { field: 'psychologicalCounseling', label: 'ููุงุฑุงุช ุงูุฅุฑุดุงุฏ ุงูููุณู' },
        { field: 'socialIntegration', label: 'ุงุณุชุฑุงุชูุฌูุงุช ุฏูุฌ ุงูุฃูุชุงู ูู ุงููุฌุชูุน' },
        { field: 'effectiveCommunication', label: 'ููุงุฑุงุช ุงูุชูุงุตู ุงููุนุงู' }
    ]);
    
    updateDomainTable(data, 'educationalTable', [
        { field: 'modernTeaching', label: 'ุฃุณุงููุจ ุงูุชุนููู ุงูุญุฏูุซุฉ' },
        { field: 'learningDifficulties', label: 'ุงุณุชุฑุงุชูุฌูุงุช ุงูุชุนุงูู ูุน ุตุนูุจุงุช ุงูุชุนูู' },
        { field: 'talentDevelopment', label: 'ููุงุฑุงุช ุงูุชุดุงู ูุชูููุฉ ุงูููุงูุจ' },
        { field: 'motivationTechniques', label: 'ุฃุณุงููุจ ุงูุชุญููุฒ ูุชุนุฒูุฒ ุงูุฏุงูุนูุฉ' },
        { field: 'careerGuidance', label: 'ููุงุฑุงุช ุงูุชูุฌูู ุงููููู' }
    ]);
    
    updateDomainTable(data, 'medicalTable', [
        { field: 'firstAid', label: 'ุฃุณุงุณูุงุช ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ' },
        { field: 'healthCare', label: 'ููุงุฑุงุช ุงูุฑุนุงูุฉ ุงูุตุญูุฉ ุงูุฃุณุงุณูุฉ' },
        { field: 'nutrition', label: 'ุฃุณุงููุจ ุงูุชุบุฐูุฉ ุงูุณูููุฉ' },
        { field: 'commonDiseases', label: 'ููุงุฑุงุช ุงูุชุนุงูู ูุน ุงูุฃูุฑุงุถ ุงูุดุงุฆุนุฉ' },
        { field: 'personalHygiene', label: 'ุฃุณุงููุจ ุชุนุฒูุฒ ุงููุธุงูุฉ ุงูุดุฎุตูุฉ' }
    ]);
    
    updateDomainTable(data, 'religiousTable', [
        { field: 'religiousValues', label: 'ุฃุณุงููุจ ุบุฑุณ ุงูููู ุงูุฏูููุฉ' },
        { field: 'teachingWorship', label: 'ููุงุฑุงุช ุชุนููู ุงูุนุจุงุฏุงุช ุจุทุฑููุฉ ูุญุจุจุฉ' },
        { field: 'spiritualAwareness', label: 'ุฃุณุงููุจ ุชูููุฉ ุงููุงุฒุน ุงูุฏููู' },
        { field: 'religiousRules', label: 'ููุงุฑุงุช ุฑุจุท ุงูุฃุญูุงู ุงูุดุฑุนูุฉ ุจุงูุญูุงุฉ' },
        { field: 'religiousIdentity', label: 'ุฃุณุงููุจ ุชุนุฒูุฒ ุงููููุฉ ุงูุฏูููุฉ' }
    ]);
    
    updateDomainTable(data, 'recreationalTable', [
        { field: 'recreationalActivities', label: 'ููุงุฑุงุช ุชุตููู ุงูุฃูุดุทุฉ ุงูุชุฑููููุฉ' },
        { field: 'tripsOrganization', label: 'ุฃุณุงููุจ ุชูุธูู ุงูุฑุญูุงุช ูุงููุนุณูุฑุงุช' },
        { field: 'eventsOrganization', label: 'ููุงุฑุงุช ุชูุธูู ุงููุณุงุจูุงุช ูุงููุนุงููุงุช' },
        { field: 'leisureTime', label: 'ุฃุณุงููุจ ุงุณุชุซูุงุฑ ุฃููุงุช ุงููุฑุงุบ' },
        { field: 'sportsTraining', label: 'ููุงุฑุงุช ุชุฏุฑูุจ ุงูุฃูุนุงุจ ุงูุฑูุงุถูุฉ' }
    ]);
    
    // ุชุญุฏูุซ ุฌุฏุงูู ุงูุงูุชุฑุงุญุงุช ูุงูููุงุญุธุงุช
    updateSuggestionsTable(data);
}

// ุชุญุฏูุซ ุฌุฏูู ูุฌุงู ูุนูู
function updateDomainTable(data, tableId, fields) {
    const table = document.getElementById(tableId);
    if (!table) return;
    
    table.innerHTML = '';
    
    // ุชุตููู ุงูุจูุงูุงุช ุญุณุจ ุงููุณูู ุงููุธููู
    const jobTitles = ['ูุฏูุฑ', 'ุฃุฎุตุงุฆู ููุณู', 'ุฃุฎุตุงุฆู ุงุฌุชูุงุนู', 'ูุนูู', 'ููุฏู ุฑุนุงูุฉ'];
    
    fields.forEach(field => {
        const row = document.createElement('tr');
        
        // ุฅุถุงูุฉ ุงุณู ุงูููุงุฑุฉ
        const skillCell = document.createElement('td');
        skillCell.textContent = field.label;
        row.appendChild(skillCell);
        
        // ุญุณุงุจ ูุชูุณุท ุงูุงุญุชูุงุฌ ููู ูุณูู ูุธููู
        jobTitles.forEach(jobTitle => {
            const jobData = data.filter(item => item.jobTitle === jobTitle);
            const average = calculateFieldAverage(jobData, field.field);
            
            const cell = document.createElement('td');
            cell.textContent = average.toFixed(2);
            row.appendChild(cell);
        });
        
        // ุฅุถุงูุฉ ุงููุชูุณุท ุงูุนุงู
        const averageCell = document.createElement('td');
        const average = calculateFieldAverage(data, field.field);
        averageCell.textContent = average.toFixed(2);
        row.appendChild(averageCell);
        
        table.appendChild(row);
    });
}

// ุชุญุฏูุซ ุฌุฏุงูู ุงูุงูุชุฑุงุญุงุช ูุงูููุงุญุธุงุช
function updateSuggestionsTable(data) {
    // ุชุญููู ุงููุฌุงูุงุช ุงูุชุฏุฑูุจูุฉ ุงูููุชุฑุญุฉ
    const otherAreas = {};
    data.forEach(item => {
        if (item.otherTrainingAreas && item.otherTrainingAreas.trim() !== '') {
            const areas = item.otherTrainingAreas.split('\n');
            areas.forEach(area => {
                const trimmedArea = area.trim();
                if (trimmedArea) {
                    otherAreas[trimmedArea] = (otherAreas[trimmedArea] || 0) + 1;
                }
            });
        }
    });
    
    // ุชุญููู ุงูุชุฑุงุญุงุช ุชุทููุฑ ุงูุจุฑุงูุฌ ุงูุชุฏุฑูุจูุฉ
    const suggestions = {};
    data.forEach(item => {
        if (item.suggestions && item.suggestions.trim() !== '') {
            const suggestionsList = item.suggestions.split('\n');
            suggestionsList.forEach(suggestion => {
                const trimmedSuggestion = suggestion.trim();
                if (trimmedSuggestion) {
                    suggestions[trimmedSuggestion] = (suggestions[trimmedSuggestion] || 0) + 1;
                }
            });
        }
    });
    
    // ุชุญุฏูุซ ุฌุฏูู ุงููุฌุงูุงุช ุงูููุชุฑุญุฉ
    updateFrequencyTable('otherAreasTable', otherAreas);
    
    // ุชุญุฏูุซ ุฌุฏูู ุงูุงูุชุฑุงุญุงุช
    updateFrequencyTable('suggestionsTable', suggestions);
    
    // ุชุญุฏูุซ ุฌุฏูู ุชูุงุตูู ุงูุงูุชุฑุงุญุงุช ูุงูููุงุญุธุงุช
    updateDetailedSuggestionsTable(data);
}

// ุชุญุฏูุซ ุฌุฏูู ุงูุชูุฑุงุฑุงุช
function updateFrequencyTable(tableId, data) {
    const table = document.getElementById(tableId);
    if (!table) return;
    
    table.innerHTML = '';
    
    const sortedData = Object.entries(data).sort((a, b) => b[1] - a[1]);
    
    sortedData.forEach((item, index) => {
        const row = document.createElement('tr');
        
        const indexCell = document.createElement('td');
        indexCell.textContent = index + 1;
        row.appendChild(indexCell);
        
        const itemCell = document.createElement('td');
        itemCell.textContent = item[0];
        row.appendChild(itemCell);
        
        const frequencyCell = document.createElement('td');
        frequencyCell.textContent = item[1];
        row.appendChild(frequencyCell);
        
        table.appendChild(row);
    });
}

// ุชุญุฏูุซ ุฌุฏูู ุชูุงุตูู ุงูุงูุชุฑุงุญุงุช ูุงูููุงุญุธุงุช
function updateDetailedSuggestionsTable(data) {
    const table = document.getElementById('detailedSuggestionsTable');
    if (!table) return;
    
    table.innerHTML = '';
    
    // ููุชุฑุฉ ุงูุจูุงูุงุช ููุญุตูู ุนูู ุงูุณุฌูุงุช ุงูุชู ุชุญุชูู ุนูู ุงูุชุฑุงุญุงุช ุฃู ูุฌุงูุงุช ููุชุฑุญุฉ
    const filteredData = data.filter(item => 
        (item.otherTrainingAreas && item.otherTrainingAreas.trim() !== '') || 
        (item.suggestions && item.suggestions.trim() !== '')
    );
    
    filteredData.forEach(item => {
        const row = document.createElement('tr');
        
        const organizationCell = document.createElement('td');
        organizationCell.textContent = item.organization || '-';
        row.appendChild(organizationCell);
        
        const jobTitleCell = document.createElement('td');
        jobTitleCell.textContent = item.jobTitle || '-';
        row.appendChild(jobTitleCell);
        
        const areasCell = document.createElement('td');
        areasCell.textContent = item.otherTrainingAreas || '-';
        row.appendChild(areasCell);
        
        const suggestionsCell = document.createElement('td');
        suggestionsCell.textContent = item.suggestions || '-';
        row.appendChild(suggestionsCell);
        
        table.appendChild(row);
    });
}

// ุชุญุฏูุซ ูุงุฆูุฉ ุงูููุธูุงุช
function updateOrganizationsList(data) {
    const organizations = [...new Set(data.map(item => item.organization))];
    const select = document.getElementById('organizationFilter');
    
    if (!select) return;
    
    // ุฅุถุงูุฉ ุฎูุงุฑ "ุฌููุน ุงูููุธูุงุช"
    select.innerHTML = '<option value="all">ุฌููุน ุงูููุธูุงุช</option>';
    
    // ุฅุถุงูุฉ ุงูููุธูุงุช
    organizations.forEach(org => {
        if (org) {
            const option = document.createElement('option');
            option.value = org;
            option.textContent = org;
            select.appendChild(option);
        }
    });
    
    // ุฅุถุงูุฉ ูุณุชูุน ุงูุญุฏุซ
    select.addEventListener('change', () => filterOrganizationData(data));
}

// ููุชุฑุฉ ุงูุจูุงูุงุช ุญุณุจ ุงูููุธูุฉ
function filterOrganizationData() {
    const organizationFilter = document.getElementById('organizationFilter').value;
    
    // ุฅุนุงุฏุฉ ุงุณุชุฏุนุงุก ุงูุจูุงูุงุช ูุชุทุจูู ุงูููุชุฑ
    fetch('/api/survey-data')
        .then(response => response.json())
        .then(data => {
            let filteredData = data;
            
            if (organizationFilter !== 'all') {
                filteredData = data.filter(item => item.organization === organizationFilter);
            }
            
            // ุชุญุฏูุซ ุงูุฑุณูู ุงูุจูุงููุฉ ูุงูุฌุฏุงูู ููููุธูุฉ ุงููุญุฏุฏุฉ
            updateOrganizationCharts(filteredData);
            updateOrganizationTables(filteredData);
        })
        .catch(error => {
            console.error('ุฎุทุฃ ูู ุงุณุชุฑุฌุงุน ุจูุงูุงุช ุงูุงุณุชุจูุงู:', error);
        });
}

// ููุชุฑุฉ ุงูุจูุงูุงุช ุญุณุจ ููุฏ ุงูููุธูุฉ
function filterOrganizationByCode() {
    const organizationCode = document.getElementById('organizationCodeFilter').value;
    
    // ุฅุนุงุฏุฉ ุงุณุชุฏุนุงุก ุงูุจูุงูุงุช ูุชุทุจูู ุงูููุชุฑ
    fetch('/api/survey-data')
        .then(response => response.json())
        .then(data => {
            let filteredData = data;
            
            if (organizationCode) {
                filteredData = data.filter(item => item.organizationCode === organizationCode);
            }
            
            // ุชุญุฏูุซ ุงูุฑุณูู ุงูุจูุงููุฉ ูุงูุฌุฏุงูู ููููุธูุฉ ุงููุญุฏุฏุฉ
            updateOrganizationCharts(filteredData);
            updateOrganizationTables(filteredData);
        })
        .catch(error => {
            console.error('ุฎุทุฃ ูู ุงุณุชุฑุฌุงุน ุจูุงูุงุช ุงูุงุณุชุจูุงู:', error);
        });
}

// ุชุญุฏูุซ ุงูุฑุณูู ุงูุจูุงููุฉ ููููุธูุฉ
function updateOrganizationCharts(data) {
    // ุฑุณู ุจูุงูู ููุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู ุญุณุจ ุงููุฌุงูุงุช
    const domains = {
        'ุงูููุณู ูุงูุงุฌุชูุงุนู': calculateDomainAverage(data, ['psychologicalTrauma', 'selfConfidence', 'psychologicalCounseling', 'socialIntegration', 'effectiveCommunication']),
        'ุงูุชุฑุจูู ูุงูุชุนูููู': calculateDomainAverage(data, ['modernTeaching', 'learningDifficulties', 'talentDevelopment', 'motivationTechniques', 'careerGuidance']),
        'ุงูุตุญู ูุงูุทุจู': calculateDomainAverage(data, ['firstAid', 'healthCare', 'nutrition', 'commonDiseases', 'personalHygiene']),
        'ุงูุฏููู ูุงูุฑูุญู': calculateDomainAverage(data, ['religiousValues', 'teachingWorship', 'spiritualAwareness', 'religiousRules', 'religiousIdentity']),
        'ุงูุชุฑูููู ูุงูุฑูุงุถู': calculateDomainAverage(data, ['recreationalActivities', 'tripsOrganization', 'eventsOrganization', 'leisureTime', 'sportsTraining'])
    };
    
    const labels = Object.keys(domains);
    const values = Object.values(domains);
    
    // ุชุฏููุฑ ุงูุฑุณู ุงูุจูุงูู ุงูุณุงุจู ุฅุฐุง ูุฌุฏ
    const chartElement = document.getElementById('organizationDomainsChart');
    if (chartElement && chartElement.chart) {
        chartElement.chart.destroy();
    }
    
    const ctx = chartElement.getContext('2d');
    chartElement.chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'ูุชูุณุท ุงูุงุญุชูุงุฌ ุงูุชุฏุฑูุจู',
                data: values,
                backgroundColor: [
                    '#4e73df',
                    '#1cc88a',
                    '#36b9cc',
                    '#f6c23e',
                    '#e74a3b'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 5
                }
            }
        }
    });
    
    // ุฑุณู ุจูุงูู ูุชูุฒูุน ุงููุดุงุฑููู ุญุณุจ ุงููุณูู ุงููุธููู
    const jobTitles = {};
    data.forEach(item => {
        if (item.jobTitle) {
            jobTitles[item.jobTitle] = (jobTitles[item.jobTitle] || 0) + 1;
        }
    });
    
    const jobLabels = Object.keys(jobTitles);
    const jobValues = Object.values(jobTitles);
    
    // ุชุฏููุฑ ุงูุฑุณู ุงูุจูุงูู ุงูุณุงุจู ุฅุฐุง ูุฌุฏ
    const jobsChartElement = document.getElementById('organizationJobsChart');
    if (jobsChartElement && jobsChartElement.chart) {
        jobsChartElement.chart.destroy();
    }
    
    const jobsCtx = jobsChartElement.getContext('2d');
    jobsChartElement.chart = new Chart(jobsCtx, {
        type: 'pie',
        data: {
            labels: jobLabels,
            datasets: [{
                data: jobValues,
                backgroundColor: [
                    '#4e73df',
                    '#1cc88a',
                    '#36b9cc',
                    '#f6c23e',
                    '#e74a3b',
                    '#858796'
                ]
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'right'
                }
            }
        }
    });
}

// ุชุญุฏูุซ ุฌุฏุงูู ุงูููุธูุฉ
function updateOrganizationTables(data) {
    // ุชุญุฏูุซ ุฌุฏูู ุชูุงุตูู ุงูุงุญุชูุงุฌุงุช ุงูุชุฏุฑูุจูุฉ ููููุธูุฉ
    const detailsTable = document.getElementById('organizationDetailsTable');
    if (detailsTable) {
        detailsTable.innerHTML = '';
        
        // ุฌูุน ุฌููุน ุงูููุงุฑุงุช ูุญุณุงุจ ูุชูุณุทุงุชูุง
        const skills = [
            { domain: 'ุงูููุณู ูุงูุงุฌุชูุงุนู', field: 'psychologicalTrauma', label: 'ููุงุฑุงุช ุงูุชุนุงูู ูุน ุงูุตุฏูุงุช ุงูููุณูุฉ' },
            { domain: 'ุงูููุณู ูุงูุงุฌุชูุงุนู', field: 'selfConfidence', label: 'ุฃุณุงููุจ ุจูุงุก ุงูุซูุฉ ุจุงูููุณ ูุชูุฏูุฑ ุงูุฐุงุช' },
            { domain: 'ุงูููุณู ูุงูุงุฌุชูุงุนู', field: 'psychologicalCounseling', label: 'ููุงุฑุงุช ุงูุฅุฑุดุงุฏ ุงูููุณู' },
            { domain: 'ุงูููุณู ูุงูุงุฌุชูุงุนู', field: 'socialIntegration', label: 'ุงุณุชุฑุงุชูุฌูุงุช ุฏูุฌ ุงูุฃูุชุงู ูู ุงููุฌุชูุน' },
            { domain: 'ุงูููุณู ูุงูุงุฌุชูุงุนู', field: 'effectiveCommunication', label: 'ููุงุฑุงุช ุงูุชูุงุตู ุงููุนุงู' },
            
            { domain: 'ุงูุชุฑุจูู ูุงูุชุนูููู', field: 'modernTeaching', label: 'ุฃุณุงููุจ ุงูุชุนููู ุงูุญุฏูุซุฉ' },
            { domain: 'ุงูุชุฑุจูู ูุงูุชุนูููู', field: 'learningDifficulties', label: 'ุงุณุชุฑุงุชูุฌูุงุช ุงูุชุนุงูู ูุน ุตุนูุจุงุช ุงูุชุนูู' },
            { domain: 'ุงูุชุฑุจูู ูุงูุชุนูููู', field: 'talentDevelopment', label: 'ููุงุฑุงุช ุงูุชุดุงู ูุชูููุฉ ุงูููุงูุจ' },
            { domain: 'ุงูุชุฑุจูู ูุงูุชุนูููู', field: 'motivationTechniques', label: 'ุฃุณุงููุจ ุงูุชุญููุฒ ูุชุนุฒูุฒ ุงูุฏุงูุนูุฉ' },
            { domain: 'ุงูุชุฑุจูู ูุงูุชุนูููู', field: 'careerGuidance', label: 'ููุงุฑุงุช ุงูุชูุฌูู ุงููููู' },
            
            { domain: 'ุงูุตุญู ูุงูุทุจู', field: 'firstAid', label: 'ุฃุณุงุณูุงุช ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ' },
            { domain: 'ุงูุตุญู ูุงูุทุจู', field: 'healthCare', label: 'ููุงุฑุงุช ุงูุฑุนุงูุฉ ุงูุตุญูุฉ ุงูุฃุณุงุณูุฉ' },
            { domain: 'ุงูุตุญู ูุงูุทุจู', field: 'nutrition', label: 'ุฃุณุงููุจ ุงูุชุบุฐูุฉ ุงูุณูููุฉ' },
            { domain: 'ุงูุตุญู ูุงูุทุจู', field: 'commonDiseases', label: 'ููุงุฑุงุช ุงูุชุนุงูู ูุน ุงูุฃูุฑุงุถ ุงูุดุงุฆุนุฉ' },
            { domain: 'ุงูุตุญู ูุงูุทุจู', field: 'personalHygiene', label: 'ุฃุณุงููุจ ุชุนุฒูุฒ ุงููุธุงูุฉ ุงูุดุฎุตูุฉ' },
            
            { domain: 'ุงูุฏููู ูุงูุฑูุญู', field: 'religiousValues', label: 'ุฃุณุงููุจ ุบุฑุณ ุงูููู ุงูุฏูููุฉ' },
            { domain: 'ุงูุฏููู ูุงูุฑูุญู', field: 'teachingWorship', label: 'ููุงุฑุงุช ุชุนููู ุงูุนุจุงุฏุงุช ุจุทุฑููุฉ ูุญุจุจุฉ' },
            { domain: 'ุงูุฏููู ูุงูุฑูุญู', field: 'spiritualAwareness', label: 'ุฃุณุงููุจ ุชูููุฉ ุงููุงุฒุน ุงูุฏููู' },
            { domain: 'ุงูุฏููู ูุงูุฑูุญู', field: 'religiousRules', label: 'ููุงุฑุงุช ุฑุจุท ุงูุฃุญูุงู ุงูุดุฑุนูุฉ ุจุงูุญูุงุฉ' },
            { domain: 'ุงูุฏููู ูุงูุฑูุญู', field: 'religiousIdentity', label: 'ุฃุณุงููุจ ุชุนุฒูุฒ ุงููููุฉ ุงูุฏูููุฉ' },
            
            { domain: 'ุงูุชุฑูููู ูุงูุฑูุงุถู', field: 'recreationalActivities', label: 'ููุงุฑุงุช ุชุตููู ุงูุฃูุดุทุฉ ุงูุชุฑููููุฉ' },
            { domain: 'ุงูุชุฑูููู ูุงูุฑูุงุถู', field: 'tripsOrganization', label: 'ุฃุณุงููุจ ุชูุธูู ุงูุฑุญูุงุช ูุงููุนุณูุฑุงุช' },
            { domain: 'ุงูุชุฑูููู ูุงูุฑูุงุถู', field: 'eventsOrganization', label: 'ููุงุฑุงุช ุชูุธูู ุงููุณุงุจูุงุช ูุงููุนุงููุงุช' },
            { domain: 'ุงูุชุฑูููู ูุงูุฑูุงุถู', field: 'leisureTime', label: 'ุฃุณุงููุจ ุงุณุชุซูุงุฑ ุฃููุงุช ุงููุฑุงุบ' },
            { domain: 'ุงูุชุฑูููู ูุงูุฑูุงุถู', field: 'sportsTraining', label: 'ููุงุฑุงุช ุชุฏุฑูุจ ุงูุฃูุนุงุจ ุงูุฑูุงุถูุฉ' }
        ];
        
        // ุญุณุงุจ ูุชูุณุท ุงูุงุญุชูุงุฌ ููู ููุงุฑุฉ
        const skillsWithAverage = skills.map(skill => ({
            ...skill,
            average: calculateFieldAverage(data, skill.field)
        }));
        
        // ุชุฑุชูุจ ุงูููุงุฑุงุช ุญุณุจ ูุชูุณุท ุงูุงุญุชูุงุฌ
        const sortedSkills = skillsWithAverage.sort((a, b) => b.average - a.average);
        
        // ุฅุถุงูุฉ ุงูุตููู ุฅูู ุงูุฌุฏูู
        sortedSkills.forEach((skill, index) => {
            const row = document.createElement('tr');
            
            const domainCell = document.createElement('td');
            domainCell.textContent = skill.domain;
            row.appendChild(domainCell);
            
            const skillCell = document.createElement('td');
            skillCell.textContent = skill.label;
            row.appendChild(skillCell);
            
            const averageCell = document.createElement('td');
            averageCell.textContent = skill.average.toFixed(2);
            row.appendChild(averageCell);
            
            const rankCell = document.createElement('td');
            rankCell.textContent = index + 1;
            row.appendChild(rankCell);
            
            detailsTable.appendChild(row);
        });
    }
    
    // ุชุญุฏูุซ ุฌุฏูู ุงููุดุงุฑููู ูู ุงูููุธูุฉ
    const participantsTable = document.getElementById('organizationParticipantsTable');
    if (participantsTable) {
        participantsTable.innerHTML = '';
        
        data.forEach(item => {
            const row = document.createElement('tr');
            
            const nameCell = document.createElement('td');
            nameCell.textContent = item.fullName || '-';
            row.appendChild(nameCell);
            
            const jobTitleCell = document.createElement('td');
            jobTitleCell.textContent = item.jobTitle || '-';
            row.appendChild(jobTitleCell);
            
            const experienceCell = document.createElement('td');
            experienceCell.textContent = item.experience || '-';
            row.appendChild(experienceCell);
            
            const ageGroupsCell = document.createElement('td');
            ageGroupsCell.textContent = Array.isArray(item.ageGroups) ? item.ageGroups.join(', ') : '-';
            row.appendChild(ageGroupsCell);
            
            const careTypesCell = document.createElement('td');
            careTypesCell.textContent = Array.isArray(item.careTypes) ? item.careTypes.join(', ') : '-';
            row.appendChild(careTypesCell);
            
            participantsTable.appendChild(row);
        });
    }
}

// ุนุฑุถ ุฑุณุงูุฉ ุนุฏู ูุฌูุฏ ุจูุงูุงุช
function showNoDataMessage() {
    const containers = document.querySelectorAll('.chart-container');
    containers.forEach(container => {
        container.innerHTML = '<div class="alert alert-info">ูุง ุชูุฌุฏ ุจูุงูุงุช ูุชุงุญุฉ</div>';
    });
}

// ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ
function showErrorMessage() {
    const containers = document.querySelectorAll('.chart-container');
    containers.forEach(container => {
        container.innerHTML = '<div class="alert alert-danger">ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช</div>';
    });
}
</script>
</body>
</html>
