<%- include('layout', {title: 'لوحة التحكم', active: 'dashboard'}) %>

<section class="dashboard-page">
    <div class="container">
        <h1 class="text-center my-4">لوحة التحكم</h1>
        <p class="text-center mb-5">تحليل وعرض نتائج استبيان تقييم الاحتياجات التدريبية</p>

        <!-- علامات التبويب -->
        <ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
            <!-- كل تبويب -->
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="summary-tab" data-bs-toggle="tab" data-bs-target="#summary" type="button" role="tab">ملخص النتائج</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="psychological-tab" data-bs-toggle="tab" data-bs-target="#psychological" type="button" role="tab">النفسي والاجتماعي</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="educational-tab" data-bs-toggle="tab" data-bs-target="#educational" type="button" role="tab">التربوي والتعليمي</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="medical-tab" data-bs-toggle="tab" data-bs-target="#medical" type="button" role="tab">الصحي والطبي</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="religious-tab" data-bs-toggle="tab" data-bs-target="#religious" type="button" role="tab">الديني والروحي</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="recreational-tab" data-bs-toggle="tab" data-bs-target="#recreational" type="button" role="tab">الترفيهي والرياضي</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="suggestions-tab" data-bs-toggle="tab" data-bs-target="#suggestions" type="button" role="tab">الاقتراحات</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="organizations-tab" data-bs-toggle="tab" data-bs-target="#organizations" type="button" role="tab">تقارير المنظمات</button>
            </li>
        </ul>

        <!-- محتوى التبويبات -->
        <div class="tab-content" id="dashboardTabsContent">
            <!-- المحتوى الديناميكي لكل تبويب يتم تعبئته بواسطة dashboard.js -->
            <div class="tab-pane fade show active" id="summary" role="tabpanel" aria-labelledby="summary-tab">
                <div class="dashboard-card">
                    <h3>ملخص نتائج الاستبيان</h3>
                    <canvas id="participantsChart"></canvas>
                    <canvas id="domainsChart"></canvas>
                </div>
            </div>
            <div class="tab-pane fade" id="psychological" role="tabpanel" aria-labelledby="psychological-tab">
                <canvas id="psychologicalChart"></canvas>
            </div>
            <div class="tab-pane fade" id="educational" role="tabpanel" aria-labelledby="educational-tab">
                <canvas id="educationalChart"></canvas>
            </div>
            <div class="tab-pane fade" id="medical" role="tabpanel" aria-labelledby="medical-tab">
                <canvas id="medicalChart"></canvas>
            </div>
            <div class="tab-pane fade" id="religious" role="tabpanel" aria-labelledby="religious-tab">
                <canvas id="religiousChart"></canvas>
            </div>
            <div class="tab-pane fade" id="recreational" role="tabpanel" aria-labelledby="recreational-tab">
                <canvas id="recreationalChart"></canvas>
            </div>
            <div class="tab-pane fade" id="suggestions" role="tabpanel" aria-labelledby="suggestions-tab">
                <div id="suggestionsTable"></div>
            </div>
            <div class="tab-pane fade" id="organizations" role="tabpanel" aria-labelledby="organizations-tab">
                <div id="organizationReports"></div>
            </div>
        </div>
    </div>
</section>

<!-- المكتبات -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/js/dashboard.js"></script>
